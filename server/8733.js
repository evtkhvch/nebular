"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=8733,exports.ids=[8733],exports.modules={5281:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>NbInfiniteListDirective});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(37716),rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(79765),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(20945),rxjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(46797),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(25917),rxjs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(35758),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(45435),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(43190),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(46782),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(15257),rxjs_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(88002),_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24036),_list_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(59190),_services_scroll_service__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(94775),_services_ruler_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(62829);__name(class{},"NbScrollableContainerDimentions");class NbInfiniteListDirective{constructor(elementRef,scrollService,dimensionsService){this.elementRef=elementRef,this.scrollService=scrollService,this.dimensionsService=dimensionsService,this.destroy$=new rxjs__WEBPACK_IMPORTED_MODULE_0__.xQ,this.windowScroll=!1,this.bottomThreshold=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.vpe(!0),this.topThreshold=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.vpe(!0)}get elementScroll(){return!this.windowScroll}set listenWindowScroll(value){this.windowScroll=(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.eB)(value)}onElementScroll(){this.elementScroll&&this.checkPosition(this.elementRef.nativeElement)}ngAfterViewInit(){this.scrollService.onScroll().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.h)(()=>this.windowScroll),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.w)(()=>this.getContainerDimensions()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.R)(this.destroy$)).subscribe(dimentions=>this.checkPosition(dimentions)),this.listItems.changes.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.w)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.F)(50).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.h)(()=>this.inSyncWithDom()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.R)((0,rxjs__WEBPACK_IMPORTED_MODULE_8__.H)(1e3)))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.w)(()=>this.getContainerDimensions()),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.R)(this.destroy$)).subscribe(dimentions=>this.checkPosition(dimentions)),this.getContainerDimensions().subscribe(dimentions=>this.checkPosition(dimentions))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}checkPosition({scrollHeight,scrollTop,clientHeight}){const initialCheck=null==this.lastScrollPosition,manualCheck=this.lastScrollPosition===scrollTop,scrollUp=scrollTop<this.lastScrollPosition,scrollDown=scrollTop>this.lastScrollPosition;(initialCheck||manualCheck||scrollDown)&&scrollHeight-scrollTop-clientHeight<=this.threshold&&this.bottomThreshold.emit(),(initialCheck||scrollUp)&&scrollTop<=this.threshold&&this.topThreshold.emit(),this.lastScrollPosition=scrollTop}getContainerDimensions(){if(this.elementScroll){const{scrollTop,scrollHeight,clientHeight}=this.elementRef.nativeElement;return(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)({scrollTop,scrollHeight,clientHeight})}return(0,rxjs__WEBPACK_IMPORTED_MODULE_10__.D)([this.scrollService.getPosition(),this.dimensionsService.getDimensions()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.U)(([scrollPosition,dimensions])=>({scrollTop:scrollPosition.y,scrollHeight:dimensions.scrollHeight,clientHeight:dimensions.clientHeight})))}inSyncWithDom(){return this.elementRef.nativeElement.children.length===this.listItems.length}}__name(NbInfiniteListDirective,"NbInfiniteListDirective"),NbInfiniteListDirective.\u0275fac=__name(function(t){return new(t||NbInfiniteListDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SBq),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Y36(_services_scroll_service__WEBPACK_IMPORTED_MODULE_12__.H),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Y36(_services_ruler_service__WEBPACK_IMPORTED_MODULE_13__.m))},"NbInfiniteListDirective_Factory"),NbInfiniteListDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_1__.lG2({type:NbInfiniteListDirective,selectors:[["","nbInfiniteList",""]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Suo(dirIndex,_list_component__WEBPACK_IMPORTED_MODULE_14__.q,4),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_1__.iGM(_t=_angular_core__WEBPACK_IMPORTED_MODULE_1__.CRH())&&(ctx.listItems=_t)}},"NbInfiniteListDirective_ContentQueries"),hostBindings:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.NdJ("scroll",__name(function(){return ctx.onElementScroll()},"NbInfiniteListDirective_scroll_HostBindingHandler"))},"NbInfiniteListDirective_HostBindings"),inputs:{threshold:"threshold",listenWindowScroll:"listenWindowScroll"},outputs:{bottomThreshold:"bottomThreshold",topThreshold:"topThreshold"}})},3656:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>NbListPageTrackerDirective});var _angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(37716),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(46782),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(79765),_list_component__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(63906),__webpack_require__(59190));class NbListPageTrackerDirective{constructor(){this.destroy$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.xQ,this.startPage=1,this.pageChange=new _angular_core__WEBPACK_IMPORTED_MODULE_2__.vpe,this.observer=new IntersectionObserver(entries=>this.checkForPageChange(entries),{threshold:.5})}ngAfterViewInit(){this.listItems&&this.listItems.length&&this.observeItems(),this.listItems.changes.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.R)(this.destroy$)).subscribe(()=>this.observeItems())}ngOnDestroy(){this.observer.disconnect&&this.observer.disconnect()}observeItems(){this.listItems.forEach(i=>this.observer.observe(i.nativeElement))}checkForPageChange(entries){const mostVisiblePage=this.findMostVisiblePage(entries);mostVisiblePage&&this.currentPage!==mostVisiblePage&&(this.currentPage=mostVisiblePage,this.pageChange.emit(this.currentPage))}findMostVisiblePage(entries){const intersectionRatioByPage=new Map;for(const entry of entries){if(entry.intersectionRatio<.5)continue;const elementIndex=this.elementIndex(entry.target);if(-1===elementIndex)continue;const page=this.startPage+Math.floor(elementIndex/this.pageSize);let ratio=entry.intersectionRatio;intersectionRatioByPage.has(page)&&(ratio+=intersectionRatioByPage.get(page)),intersectionRatioByPage.set(page,ratio)}let mostVisiblePage,maxRatio=0;return intersectionRatioByPage.forEach((ratio,page)=>{ratio>maxRatio&&(maxRatio=ratio,mostVisiblePage=page)}),mostVisiblePage}elementIndex(element){return element.parentElement&&element.parentElement.children?Array.from(element.parentElement.children).indexOf(element):-1}}__name(NbListPageTrackerDirective,"NbListPageTrackerDirective"),NbListPageTrackerDirective.\u0275fac=__name(function(t){return new(t||NbListPageTrackerDirective)},"NbListPageTrackerDirective_Factory"),NbListPageTrackerDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_2__.lG2({type:NbListPageTrackerDirective,selectors:[["","nbListPageTracker",""]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_2__.Suo(dirIndex,_list_component__WEBPACK_IMPORTED_MODULE_4__.q,4,_angular_core__WEBPACK_IMPORTED_MODULE_2__.SBq),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_2__.iGM(_t=_angular_core__WEBPACK_IMPORTED_MODULE_2__.CRH())&&(ctx.listItems=_t)}},"NbListPageTrackerDirective_ContentQueries"),inputs:{pageSize:"pageSize",startPage:"startPage"},outputs:{pageChange:"pageChange"}})},59190:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>NbListComponent,q:()=>NbListItemComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(37716);const _c0=[[["nb-list-item"]]];class NbListComponent{constructor(){this.role="list"}}__name(NbListComponent,"NbListComponent"),NbListComponent.\u0275fac=__name(function(t){return new(t||NbListComponent)},"NbListComponent_Factory"),NbListComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Xpm({type:NbListComponent,selectors:[["nb-list"]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.uIk("role",ctx.role)},"NbListComponent_HostBindings"),inputs:{role:"role"},ngContentSelectors:["nb-list-item"],decls:1,vars:0,template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.F$t(_c0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Hsn(0))},"NbListComponent_Template"),styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;overflow:auto}"]});class NbListItemComponent{constructor(){this.role="listitem"}}__name(NbListItemComponent,"NbListItemComponent"),NbListItemComponent.\u0275fac=__name(function(t){return new(t||NbListItemComponent)},"NbListItemComponent_Factory"),NbListItemComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Xpm({type:NbListItemComponent,selectors:[["nb-list-item"]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.uIk("role",ctx.role)},"NbListItemComponent_HostBindings"),inputs:{role:"role"},ngContentSelectors:["*"],decls:1,vars:0,template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.F$t(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Hsn(0))},"NbListItemComponent_Template"),styles:["[_nghost-%COMP%]{display:flex;align-items:center;flex-shrink:0}"]})},10643:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>NbListModule});var _list_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(59190),_list_page_tracker_directive__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3656),_infinite_list_directive__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5281),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(37716);_list_component__WEBPACK_IMPORTED_MODULE_0__.z,_list_component__WEBPACK_IMPORTED_MODULE_0__.q,_list_page_tracker_directive__WEBPACK_IMPORTED_MODULE_1__.B,_infinite_list_directive__WEBPACK_IMPORTED_MODULE_2__.s;class NbListModule{}__name(NbListModule,"NbListModule"),NbListModule.\u0275fac=__name(function(t){return new(t||NbListModule)},"NbListModule_Factory"),NbListModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_3__.oAB({type:NbListModule}),NbListModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_3__.cJS({})},18733:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AuthPlaygroundModule:()=>AuthPlaygroundModule,filterInterceptorRequest:()=>filterInterceptorRequest});var common=__webpack_require__(38583),fesm2015_forms=__webpack_require__(3679),http=__webpack_require__(91841),card_module=__webpack_require__(32937),layout_module=__webpack_require__(44265),list_module=__webpack_require__(10643),switchMap=__webpack_require__(43190),auth_service=__webpack_require__(15798),auth_options=__webpack_require__(69207),core=__webpack_require__(37716);class NbAuthJWTInterceptor{constructor(injector,filter){this.injector=injector,this.filter=filter}intercept(req,next){return this.filter(req)?next.handle(req):this.authService.isAuthenticatedOrRefresh().pipe((0,switchMap.w)(authenticated=>authenticated?this.authService.getToken().pipe((0,switchMap.w)(token=>{const JWT=`Bearer ${token.getValue()}`;return req=req.clone({setHeaders:{Authorization:JWT}}),next.handle(req)})):next.handle(req)))}get authService(){return this.injector.get(auth_service._)}}__name(NbAuthJWTInterceptor,"NbAuthJWTInterceptor"),NbAuthJWTInterceptor.\u0275fac=__name(function(t){return new(t||NbAuthJWTInterceptor)(core.LFG(core.zs3),core.LFG(auth_options.nN))},"NbAuthJWTInterceptor_Factory"),NbAuthJWTInterceptor.\u0275prov=core.Yz7({token:NbAuthJWTInterceptor,factory:NbAuthJWTInterceptor.\u0275fac});var auth_module=__webpack_require__(68729),dummy_strategy=__webpack_require__(16721),password_strategy=__webpack_require__(67846),token_token=__webpack_require__(93264),oauth2_strategy=__webpack_require__(9814),oauth2_strategy_options=__webpack_require__(97501);class NbRoleProvider{}__name(NbRoleProvider,"NbRoleProvider");const NB_SECURITY_OPTIONS_TOKEN=new core.OlP("Nebular Security Options"),shallowObjectClone=__name(o=>Object.assign({},o),"shallowObjectClone"),shallowArrayClone=__name(a=>Object.assign([],a),"shallowArrayClone"),popParent=__name(abilities=>{const parent=abilities.parent;return delete abilities.parent,parent},"popParent");class NbAclService{constructor(settings={}){this.settings=settings,this.state={},settings.accessControl&&this.setAccessControl(settings.accessControl)}setAccessControl(list){for(const[role,value]of Object.entries(list)){const abilities=shallowObjectClone(value),parent=popParent(abilities);this.register(role,parent,abilities)}}register(role,parent=null,abilities={}){this.validateRole(role),this.state[role]={parent};for(const[permission,value]of Object.entries(abilities)){const resources="string"==typeof value?[value]:value;this.allow(role,permission,shallowArrayClone(resources))}}allow(role,permission,resource){this.validateRole(role),this.getRole(role)||this.register(role,null,{}),resource="string"==typeof resource?[resource]:resource;let resources=shallowArrayClone(this.getRoleResources(role,permission));resources=resources.concat(resource),this.state[role][permission]=resources.filter((item,pos)=>resources.indexOf(item)===pos)}can(role,permission,resource){return this.validateResource(resource),this.getRoleParent(role)&&this.can(this.getRoleParent(role),permission,resource)||this.exactCan(role,permission,resource)}getRole(role){return this.state[role]}validateRole(role){if(!role)throw new Error("NbAclService: role name cannot be empty")}validateResource(resource){if(!resource||[NbAclService.ANY_RESOURCE].includes(resource))throw new Error("NbAclService: cannot use empty or bulk '*' resource placeholder with 'can' method")}exactCan(role,permission,resource){const resources=this.getRoleResources(role,permission);return resources.includes(resource)||resources.includes(NbAclService.ANY_RESOURCE)}getRoleResources(role,permission){return this.getRoleAbilities(role)[permission]||[]}getRoleAbilities(role){const abilities=shallowObjectClone(this.state[role]||{});return popParent(shallowObjectClone(this.state[role]||{})),abilities}getRoleParent(role){return this.state[role]?this.state[role].parent:null}}__name(NbAclService,"NbAclService"),NbAclService.ANY_RESOURCE="*",NbAclService.\u0275fac=__name(function(t){return new(t||NbAclService)(core.LFG(NB_SECURITY_OPTIONS_TOKEN,8))},"NbAclService_Factory"),NbAclService.\u0275prov=core.Yz7({token:NbAclService,factory:NbAclService.\u0275fac});var map=__webpack_require__(88002);class NbAccessChecker{constructor(roleProvider,acl){this.roleProvider=roleProvider,this.acl=acl}isGranted(permission,resource){return this.roleProvider.getRole().pipe((0,map.U)(role=>Array.isArray(role)?role:[role]),(0,map.U)(roles=>roles.some(role=>this.acl.can(role,permission,resource))))}}__name(NbAccessChecker,"NbAccessChecker"),NbAccessChecker.\u0275fac=__name(function(t){return new(t||NbAccessChecker)(core.LFG(NbRoleProvider),core.LFG(NbAclService))},"NbAccessChecker_Factory"),NbAccessChecker.\u0275prov=core.Yz7({token:NbAccessChecker,factory:NbAccessChecker.\u0275fac});class NbSecurityModule{static forRoot(nbSecurityOptions){return{ngModule:NbSecurityModule,providers:[{provide:NB_SECURITY_OPTIONS_TOKEN,useValue:nbSecurityOptions},NbAclService,NbAccessChecker]}}}__name(NbSecurityModule,"NbSecurityModule"),NbSecurityModule.\u0275fac=__name(function(t){return new(t||NbSecurityModule)},"NbSecurityModule_Factory"),NbSecurityModule.\u0275mod=core.oAB({type:NbSecurityModule}),NbSecurityModule.\u0275inj=core.cJS({imports:[[common.ez]]});var router=__webpack_require__(10494);class AuthPlaygroundComponent{}__name(AuthPlaygroundComponent,"AuthPlaygroundComponent"),AuthPlaygroundComponent.\u0275fac=__name(function(t){return new(t||AuthPlaygroundComponent)},"AuthPlaygroundComponent_Factory"),AuthPlaygroundComponent.\u0275cmp=core.Xpm({type:AuthPlaygroundComponent,selectors:[["nb-playground-auth"]],decls:1,vars:0,template:__name(function(rf,ctx){1&rf&&core._UZ(0,"router-outlet")},"AuthPlaygroundComponent_Template"),directives:[router.lC],encapsulation:2});var auth_component=__webpack_require__(86239),login_component=__webpack_require__(58717),register_component=__webpack_require__(6817),logout_component=__webpack_require__(13167),request_password_component=__webpack_require__(62878),reset_password_component=__webpack_require__(64959),layout_component=__webpack_require__(40646),card_component=__webpack_require__(74743),takeUntil=__webpack_require__(46782),Subject=__webpack_require__(79765);class NbIsGrantedDirective{constructor(templateRef,viewContainer,accessChecker){this.templateRef=templateRef,this.viewContainer=viewContainer,this.accessChecker=accessChecker,this.destroy$=new Subject.xQ,this.hasView=!1}set nbIsGranted([permission,resource]){this.accessChecker.isGranted(permission,resource).pipe((0,takeUntil.R)(this.destroy$)).subscribe(can=>{can&&!this.hasView?(this.viewContainer.createEmbeddedView(this.templateRef),this.hasView=!0):!can&&this.hasView&&(this.viewContainer.clear(),this.hasView=!1)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}function AclTestComponent_button_6_Template(rf,ctx){1&rf&&(core.TgZ(0,"button"),core._uU(1,"Post Comment"),core.qZA())}function AclTestComponent_button_12_Template(rf,ctx){1&rf&&(core.TgZ(0,"button"),core._uU(1,"Post Comment"),core.qZA())}__name(NbIsGrantedDirective,"NbIsGrantedDirective"),NbIsGrantedDirective.\u0275fac=__name(function(t){return new(t||NbIsGrantedDirective)(core.Y36(core.Rgc),core.Y36(core.s_b),core.Y36(NbAccessChecker))},"NbIsGrantedDirective_Factory"),NbIsGrantedDirective.\u0275dir=core.lG2({type:NbIsGrantedDirective,selectors:[["","nbIsGranted",""]],inputs:{nbIsGranted:"nbIsGranted"}}),__name(AclTestComponent_button_6_Template,"AclTestComponent_button_6_Template"),__name(AclTestComponent_button_12_Template,"AclTestComponent_button_12_Template");const _c0=__name(function(){return["create","comments"]},"_c0");class AclTestComponent{constructor(accessChecker){this.accessChecker=accessChecker}}__name(AclTestComponent,"AclTestComponent"),AclTestComponent.\u0275fac=__name(function(t){return new(t||AclTestComponent)(core.Y36(NbAccessChecker))},"AclTestComponent_Factory"),AclTestComponent.\u0275cmp=core.Xpm({type:AclTestComponent,selectors:[["nb-actions-test"]],decls:13,vars:5,consts:[[4,"ngIf"],[4,"nbIsGranted"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"nb-layout"),core.TgZ(1,"nb-layout-column"),core.TgZ(2,"nb-card"),core.TgZ(3,"nb-card-header"),core._uU(4,"Service usage"),core.qZA(),core.TgZ(5,"nb-card-body"),core.YNc(6,AclTestComponent_button_6_Template,2,0,"button",0),core.ALo(7,"async"),core.qZA(),core.qZA(),core.TgZ(8,"nb-card"),core.TgZ(9,"nb-card-header"),core._uU(10,"Directive usage"),core.qZA(),core.TgZ(11,"nb-card-body"),core.YNc(12,AclTestComponent_button_12_Template,2,0,"button",1),core.qZA(),core.qZA(),core.qZA(),core.qZA()),2&rf&&(core.xp6(6),core.Q6J("ngIf",core.lcZ(7,2,ctx.accessChecker.isGranted("create","comments"))),core.xp6(6),core.Q6J("nbIsGranted",core.DdM(4,_c0)))},"AclTestComponent_Template"),directives:[layout_component.Aq,layout_component.dP,card_component.As,card_component.nd,card_component.yK,common.O5,NbIsGrantedDirective],pipes:[common.Ov],encapsulation:2});var tap=__webpack_require__(93342);class AuthGuard{constructor(authService,router2){this.authService=authService,this.router=router2}canActivate(){return this.authService.isAuthenticated().pipe((0,tap.b)(authenticated=>{authenticated||this.router.navigate(["auth/login"])}))}}__name(AuthGuard,"AuthGuard"),AuthGuard.\u0275fac=__name(function(t){return new(t||AuthGuard)(core.LFG(auth_service._),core.LFG(router.F0))},"AuthGuard_Factory"),AuthGuard.\u0275prov=core.Yz7({token:AuthGuard,factory:AuthGuard.\u0275fac});var of=__webpack_require__(25917),delay=__webpack_require__(71289),catchError=__webpack_require__(5304),helpers=__webpack_require__(47852),list_component=__webpack_require__(59190);function PlaygroundApiCallsComponent_nb_card_13_nb_list_item_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"nb-list-item"),core._uU(1),core.qZA()),2&rf){const wine_r2=ctx.$implicit;core.xp6(1),core.lnq(" ",wine_r2.region,", ",wine_r2.name," (",wine_r2.year,") ")}}function PlaygroundApiCallsComponent_nb_card_13_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"nb-card"),core.TgZ(1,"nb-card-header"),core._uU(2," Alain'wines "),core.qZA(),core.TgZ(3,"nb-list"),core.YNc(4,PlaygroundApiCallsComponent_nb_card_13_nb_list_item_4_Template,2,3,"nb-list-item",2),core.ALo(5,"async"),core.qZA(),core.qZA()),2&rf){const ctx_r0=core.oxw();core.xp6(4),core.Q6J("ngForOf",core.lcZ(5,1,ctx_r0.wines$))}}__name(PlaygroundApiCallsComponent_nb_card_13_nb_list_item_4_Template,"PlaygroundApiCallsComponent_nb_card_13_nb_list_item_4_Template"),__name(PlaygroundApiCallsComponent_nb_card_13_Template,"PlaygroundApiCallsComponent_nb_card_13_Template");class PlaygroundApiCallsComponent{constructor(authService,http2,router2,options={}){this.authService=authService,this.http=http2,this.router=router2,this.options=options,this.redirectDelay=0,this.strategy="",this.redirectDelay=this.getConfigValue("forms.logout.redirectDelay"),this.strategy=this.getConfigValue("forms.logout.strategy"),this.authService.onTokenChange().subscribe(token=>{this.token=null,token&&token.isValid()&&(this.token=token)})}logout(){this.authService.logout(this.strategy).pipe((0,delay.g)(this.redirectDelay)).subscribe(result=>this.router.navigate(["/auth/login"]))}loadWines(){this.wines$=this.http.get("http://localhost:4400/api/wines").pipe((0,catchError.K)(err=>(err instanceof http.UA&&401===err.status&&this.router.navigate(["/auth/login"]),(0,of.of)([]))))}getConfigValue(key){return(0,helpers.hB)(this.options,key,null)}}__name(PlaygroundApiCallsComponent,"PlaygroundApiCallsComponent"),PlaygroundApiCallsComponent.\u0275fac=__name(function(t){return new(t||PlaygroundApiCallsComponent)(core.Y36(auth_service._),core.Y36(http.eN),core.Y36(router.F0),core.Y36(auth_options.h))},"PlaygroundApiCallsComponent_Factory"),PlaygroundApiCallsComponent.\u0275cmp=core.Xpm({type:PlaygroundApiCallsComponent,selectors:[["nb-playground-api-calls"]],decls:15,vars:3,consts:[["nbButton","","status","primary",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:__name(function(rf,ctx){if(1&rf&&(core._UZ(0,"router-outlet"),core.TgZ(1,"nb-layout"),core.TgZ(2,"nb-layout-column"),core.TgZ(3,"nb-card"),core.TgZ(4,"nb-card-body"),core.TgZ(5,"h2"),core._uU(6,"You are authenticated"),core.qZA(),core.TgZ(7,"p"),core._uU(8,"You can call the secured API"),core.qZA(),core.TgZ(9,"button",0),core.NdJ("click",__name(function(){return ctx.loadWines()},"PlaygroundApiCallsComponent_Template_button_click_9_listener")),core._uU(10,"Call API"),core.qZA(),core.TgZ(11,"button",0),core.NdJ("click",__name(function(){return ctx.logout()},"PlaygroundApiCallsComponent_Template_button_click_11_listener")),core._uU(12,"Sign out"),core.qZA(),core.qZA(),core.qZA(),core.YNc(13,PlaygroundApiCallsComponent_nb_card_13_Template,6,3,"nb-card",1),core.ALo(14,"async"),core.qZA(),core.qZA()),2&rf){let tmp_0_0;core.xp6(13),core.Q6J("ngIf",null==(tmp_0_0=core.lcZ(14,1,ctx.wines$))?null:tmp_0_0.length)}},"PlaygroundApiCallsComponent_Template"),directives:[router.lC,layout_component.Aq,layout_component.dP,card_component.As,card_component.yK,common.O5,card_component.nd,list_component.z,common.sg,list_component.q],pipes:[common.Ov],encapsulation:2});const routes=[{path:"",component:AuthPlaygroundComponent,children:[{path:"",component:auth_component.A,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:login_component.Y},{path:"register",component:register_component.e},{path:"logout",component:logout_component.f},{path:"request-password",component:request_password_component.C},{path:"reset-password",component:reset_password_component.j}]}]},{path:"acl/acl-test.component",component:AclTestComponent},{path:"auth-guard.service",canActivate:[AuthGuard],component:AuthPlaygroundComponent},{path:"api-calls.component",canActivate:[AuthGuard],component:PlaygroundApiCallsComponent}];class AuthPlaygroundRoutingModule{}__name(AuthPlaygroundRoutingModule,"AuthPlaygroundRoutingModule"),AuthPlaygroundRoutingModule.\u0275fac=__name(function(t){return new(t||AuthPlaygroundRoutingModule)},"AuthPlaygroundRoutingModule_Factory"),AuthPlaygroundRoutingModule.\u0275mod=core.oAB({type:AuthPlaygroundRoutingModule}),AuthPlaygroundRoutingModule.\u0275inj=core.cJS({imports:[[router.Bz.forChild(routes)],router.Bz]});class CustomRoleProvider{constructor(authService){this.authService=authService}getRole(){return this.authService.onTokenChange().pipe((0,map.U)(token=>token instanceof token_token.OS&&token.isValid()?token.getPayload().role:"guest"))}}function filterInterceptorRequest(req){return["http://localhost:4400/api/auth/","http://other.url/with/no/token/injected/"].some(url=>req.url.includes(url))}__name(CustomRoleProvider,"CustomRoleProvider"),CustomRoleProvider.\u0275fac=__name(function(t){return new(t||CustomRoleProvider)(core.LFG(auth_service._))},"CustomRoleProvider_Factory"),CustomRoleProvider.\u0275prov=core.Yz7({token:CustomRoleProvider,factory:CustomRoleProvider.\u0275fac}),__name(filterInterceptorRequest,"filterInterceptorRequest");class AuthPlaygroundModule{}__name(AuthPlaygroundModule,"AuthPlaygroundModule"),AuthPlaygroundModule.\u0275fac=__name(function(t){return new(t||AuthPlaygroundModule)},"AuthPlaygroundModule_Factory"),AuthPlaygroundModule.\u0275mod=core.oAB({type:AuthPlaygroundModule}),AuthPlaygroundModule.\u0275inj=core.cJS({providers:[AuthGuard,{provide:http.TP,useClass:NbAuthJWTInterceptor,multi:!0},{provide:auth_options.nN,useValue:filterInterceptorRequest},{provide:NbRoleProvider,useClass:CustomRoleProvider}],imports:[[common.ez,fesm2015_forms.u5,http.JF,AuthPlaygroundRoutingModule,card_module.z,layout_module.B,list_module.C,auth_module.S.forRoot({forms:{login:{strategy:"password",redirectDelay:1e3,socialLinks:[{url:"https://github.com/akveo",target:"_blank",title:"GitHub"},{url:"https://www.facebook.com/akveo",target:"_blank",icon:"home-outline"},{url:"https://www.facebook.com/akveo",target:"_blank",title:"Twitter"}]}},strategies:[dummy_strategy.r.setup({name:"dummy",alwaysFail:!0,delay:1e3}),password_strategy.O.setup({name:"email",token:{class:token_token.OS},baseEndpoint:"http://localhost:4400/api/auth/",logout:{redirect:{success:"/auth/login",failure:"/auth/login"}},requestPass:{redirect:{success:"/auth/reset-password"}},resetPass:{redirect:{success:"/auth/login"}},errors:{key:"data.errors"}}),oauth2_strategy.F.setup({name:"password",clientId:"test",clientSecret:"secret",baseEndpoint:"http://localhost:4400/api/auth/",token:{endpoint:"token",grantType:oauth2_strategy_options.sY.PASSWORD,class:token_token.FN},refresh:{endpoint:"refresh-token",grantType:oauth2_strategy_options.sY.REFRESH_TOKEN}})]}),NbSecurityModule.forRoot({accessControl:{guest:{view:["news","comments"]},user:{parent:"guest",create:"comments"},moderator:{parent:"user",create:"news",remove:"*"}}})]]})}};
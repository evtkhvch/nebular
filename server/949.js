"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=949,exports.ids=[949],exports.modules={90949:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AzurePlaygroundModule:()=>AzurePlaygroundModule});var common=__webpack_require__(38583),fesm2015_forms=__webpack_require__(3679),http=__webpack_require__(91841),card_module=__webpack_require__(32937),layout_module=__webpack_require__(44265),auth_module=__webpack_require__(68729),of=__webpack_require__(25917),switchMap=__webpack_require__(43190),map=__webpack_require__(88002),catchError=__webpack_require__(5304),token=__webpack_require__(93264),oauth2_strategy=__webpack_require__(9814),oauth2_strategy_options=__webpack_require__(97501),auth_result=__webpack_require__(42305),core=__webpack_require__(37716);class AuthAzureToken extends token.Xq{getValue(){return this.token.id_token}}__name(AuthAzureToken,"AuthAzureToken"),AuthAzureToken.NAME="nb:auth:azure:token";class AzureADB2CAuthStrategy extends oauth2_strategy.F{constructor(){super(...arguments),this.redirectResultHandlers={[oauth2_strategy_options.aW.CODE]:()=>(0,of.of)(this.route.snapshot.queryParams).pipe((0,switchMap.w)(params=>params.code?this.requestToken(params.code):(0,of.of)(new auth_result.g(!1,params,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[])))),id_token:()=>{const requireValidToken=this.getOption("authorize.requireValidToken");return(0,of.of)(this.route.snapshot.fragment).pipe((0,map.U)(fragment=>this.parseHashAsQueryParams(fragment)),(0,map.U)(params=>params.error?new auth_result.g(!1,params,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[]):new auth_result.g(!0,params,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(params,requireValidToken))),(0,catchError.K)(err=>{const errors=[];return err instanceof token.ww?errors.push(err.message):errors.push("Something went wrong."),(0,of.of)(new auth_result.g(!1,err,this.getOption("redirect.failure"),errors))}))}},this.redirectResults={[oauth2_strategy_options.aW.CODE]:()=>(0,of.of)(null),id_token:()=>(0,of.of)(this.route.snapshot.fragment).pipe((0,map.U)(fragment=>this.parseHashAsQueryParams(fragment)),(0,map.U)(params=>!(!params||!params.id_token&&!params.error)))}}static setup(options){return[AzureADB2CAuthStrategy,options]}}__name(AzureADB2CAuthStrategy,"AzureADB2CAuthStrategy"),AzureADB2CAuthStrategy.\u0275fac=function(){let \u0275AzureADB2CAuthStrategy_BaseFactory;return __name(function(t){return(\u0275AzureADB2CAuthStrategy_BaseFactory||(\u0275AzureADB2CAuthStrategy_BaseFactory=core.n5z(AzureADB2CAuthStrategy)))(t||AzureADB2CAuthStrategy)},"AzureADB2CAuthStrategy_Factory")}(),AzureADB2CAuthStrategy.\u0275prov=core.Yz7({token:AzureADB2CAuthStrategy,factory:AzureADB2CAuthStrategy.\u0275fac});var router=__webpack_require__(10494),takeUntil=__webpack_require__(46782),Subject=__webpack_require__(79765),auth_service=__webpack_require__(15798),layout_component=__webpack_require__(40646);class AzureCallbackComponent{constructor(authService,router2){this.authService=authService,this.router=router2,this.destroy$=new Subject.xQ,this.authService.authenticate("azure").pipe((0,takeUntil.R)(this.destroy$)).subscribe(authResult=>{authResult.isSuccess()&&authResult.getRedirect()&&this.router.navigateByUrl(authResult.getRedirect())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}__name(AzureCallbackComponent,"AzureCallbackComponent"),AzureCallbackComponent.\u0275fac=__name(function(t){return new(t||AzureCallbackComponent)(core.Y36(auth_service._),core.Y36(router.F0))},"AzureCallbackComponent_Factory"),AzureCallbackComponent.\u0275cmp=core.Xpm({type:AzureCallbackComponent,selectors:[["nb-playground-azure-callback"]],decls:3,vars:0,template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"nb-layout"),core.TgZ(1,"nb-layout-column"),core._uU(2,"Authenticating..."),core.qZA(),core.qZA())},"AzureCallbackComponent_Template"),directives:[layout_component.Aq,layout_component.dP],encapsulation:2});var card_component=__webpack_require__(74743);function AzureLoginComponent_button_9_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"button",2),core.NdJ("click",__name(function(){return core.CHM(_r3),core.oxw().login()},"AzureLoginComponent_button_9_Template_button_click_0_listener")),core._uU(1,"Sign In with Azure"),core.qZA()}}function AzureLoginComponent_button_10_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"button",3),core.NdJ("click",__name(function(){return core.CHM(_r5),core.oxw().logout()},"AzureLoginComponent_button_10_Template_button_click_0_listener")),core._uU(1,"Sign Out"),core.qZA()}}__name(AzureLoginComponent_button_9_Template,"AzureLoginComponent_button_9_Template"),__name(AzureLoginComponent_button_10_Template,"AzureLoginComponent_button_10_Template");class AzureLoginComponent{constructor(authService){this.authService=authService,this.destroy$=new Subject.xQ,this.authService.onTokenChange().pipe((0,takeUntil.R)(this.destroy$)).subscribe(token2=>{this.token=null,token2&&token2.isValid()&&(this.token=token2)})}login(){this.authService.authenticate("azure").pipe((0,takeUntil.R)(this.destroy$)).subscribe(authResult=>{})}logout(){this.authService.logout("azure").pipe((0,takeUntil.R)(this.destroy$)).subscribe(authResult=>{})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}__name(AzureLoginComponent,"AzureLoginComponent"),AzureLoginComponent.\u0275fac=__name(function(t){return new(t||AzureLoginComponent)(core.Y36(auth_service._))},"AzureLoginComponent_Factory"),AzureLoginComponent.\u0275cmp=core.Xpm({type:AzureLoginComponent,selectors:[["nb-playground-azure"]],decls:11,vars:6,consts:[["nbButton","","status","success",3,"click",4,"ngIf"],["nbButton","","status","warning",3,"click",4,"ngIf"],["nbButton","","status","success",3,"click"],["nbButton","","status","warning",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"nb-layout"),core.TgZ(1,"nb-layout-column"),core.TgZ(2,"nb-card"),core.TgZ(3,"nb-card-body"),core.TgZ(4,"p"),core._uU(5),core.qZA(),core.TgZ(6,"p"),core._uU(7),core.ALo(8,"json"),core.qZA(),core.YNc(9,AzureLoginComponent_button_9_Template,2,0,"button",0),core.YNc(10,AzureLoginComponent_button_10_Template,2,0,"button",1),core.qZA(),core.qZA(),core.qZA(),core.qZA()),2&rf&&(core.xp6(5),core.hij("Current User Authenticated: ",!!ctx.token,""),core.xp6(2),core.hij("Current User Token: ",core.lcZ(8,4,ctx.token),""),core.xp6(2),core.Q6J("ngIf",!ctx.token),core.xp6(1),core.Q6J("ngIf",ctx.token))},"AzureLoginComponent_Template"),directives:[layout_component.Aq,layout_component.dP,card_component.As,card_component.yK,common.O5],pipes:[common.Ts],encapsulation:2});const routes=[{path:"",component:AzureLoginComponent},{path:"callback",component:AzureCallbackComponent}];class AzureRoutingModule{}__name(AzureRoutingModule,"AzureRoutingModule"),AzureRoutingModule.\u0275fac=__name(function(t){return new(t||AzureRoutingModule)},"AzureRoutingModule_Factory"),AzureRoutingModule.\u0275mod=core.oAB({type:AzureRoutingModule}),AzureRoutingModule.\u0275inj=core.cJS({imports:[[router.Bz.forChild(routes)],router.Bz]});class AzurePlaygroundModule{}__name(AzurePlaygroundModule,"AzurePlaygroundModule"),AzurePlaygroundModule.\u0275fac=__name(function(t){return new(t||AzurePlaygroundModule)},"AzurePlaygroundModule_Factory"),AzurePlaygroundModule.\u0275mod=core.oAB({type:AzurePlaygroundModule}),AzurePlaygroundModule.\u0275inj=core.cJS({providers:[AzureADB2CAuthStrategy],imports:[[common.ez,fesm2015_forms.u5,http.JF,auth_module.S.forRoot({strategies:[AzureADB2CAuthStrategy.setup({name:"azure",clientId:"bde728e2-2809-4ff1-bc9c-7fcb23800ebe",clientSecret:"",authorize:{endpoint:"https://login.microsoftonline.com/01513fd2-16a0-453b-9fa0-c9089bfa023e/oauth2/authorize",responseType:"id_token",scope:"openid",redirectUri:"https://akveo.github.io/nebular/example/azure/callback",params:{p:"b2c_1_nebular"}},token:{class:AuthAzureToken},redirect:{success:"/example/azure"}})]}),card_module.z,layout_module.B,AzureRoutingModule]]})}};
"use strict";(self.webpackChunknebular=self.webpackChunknebular||[]).push([[8088],{68088:function(t,e,n){n.r(e),n.d(e,{WindowModule:function(){return ct}});var i=n(38583),o=n(96136),s=n(32937),c=n(42687),r=n(60534),a=n(37716),l=n(45435),u=n(97805),d=(()=>{return(t=d||(d={})).MINIMIZED="minimized",t.MAXIMIZED="maximized",t.FULL_SCREEN="full-screen",d;var t})();const h={minimize:!0,maximize:!0,fullScreen:!0};class f{constructor(...t){this.title="",this.titleTemplateContext={},this.initialState=d.FULL_SCREEN,this.hasBackdrop=!0,this.closeOnBackdropClick=!0,this.closeOnEsc=!0,this.windowClass="",this.context={},this.viewContainerRef=null,this.buttons={},Object.assign(this,...t),this.applyDefaultButtonConfig()}applyDefaultButtonConfig(){Object.assign(this,{buttons:Object.assign(Object.assign({},h),this.buttons)})}}const m=new a.OlP("Nebular Window Content"),p=new a.OlP("Nebular Window Config"),w=new a.OlP("Nebular Window Context");var g=n(88229),b=n(79765);class C{constructor(t){this.config=t,this.stateChange$=new g.t(1),this._closed=!1,this.closed$=new b.xQ,this.state=t.initialState}get state(){return this.stateValue}set state(t){t&&this.stateValue!==t&&(this.prevStateValue=this.state,this.stateValue=t,this.stateChange$.next({oldState:this.prevStateValue,newState:t}))}get stateChange(){return this.stateChange$.asObservable()}get onClose(){return this.closed$.asObservable()}minimize(){this.state=d.MINIMIZED}maximize(){this.state=d.MAXIMIZED}fullScreen(){this.state=d.FULL_SCREEN}toPreviousState(){this.state=this.prevStateValue}close(){this._closed||(this._closed=!0,this.componentRef.destroy(),this.componentInstance=null,this.stateChange$.complete(),this.closed$.next(),this.closed$.complete())}}const x=["viewContainerRef"];let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["nb-windows-container"]],viewQuery:function(t,e){if(1&t&&a.Gf(x,7,a.s_b),2&t){let t;a.iGM(t=a.CRH())&&(e.viewContainerRef=t.first)}},decls:2,vars:0,consts:[["viewContainerRef",""]],template:function(t,e){1&t&&a.GkF(0,null,0)},styles:["[_nghost-%COMP%]{display:flex;align-items:flex-end;overflow-x:auto}[_nghost-%COMP%]     nb-window:not(.full-screen){margin:0 2rem}"]}),t})();var y=n(16784),k=n(9787),O=n(74743),M=n(37819),_=n(72037);function Z(t,e){1&t&&a.GkF(0)}const R=function(t){return{$implicit:t}};function S(t,e){if(1&t&&(a.TgZ(0,"div",6),a.YNc(1,Z,1,0,"ng-container",7),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngTemplateOutlet",t.config.titleTemplate)("ngTemplateOutletContext",a.VKq(2,R,t.config.titleTemplateContext))}}function T(t,e){if(1&t&&(a.TgZ(0,"div",8),a._uU(1),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Oqu(t.config.title)}}function z(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"button",4),a.NdJ("click",function(){return a.CHM(t),a.oxw().minimize()}),a._UZ(2,"nb-icon",9),a.qZA(),a.BQk()}}function P(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",4),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).maximize()}),a._UZ(1,"nb-icon",11),a.qZA()}}function I(t,e){if(1&t&&(a.ynx(0),a.YNc(1,P,2,0,"button",10),a.BQk()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngIf",t.isFullScreen)}}function A(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",4),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).maximizeOrFullScreen()}),a._UZ(1,"nb-icon",12),a.qZA()}}function E(t,e){if(1&t&&(a.ynx(0),a.YNc(1,A,2,0,"button",10),a.BQk()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngIf",t.minimized||t.maximized)}}function W(t,e){1&t&&(a.TgZ(0,"nb-card-body"),a._UZ(1,"nb-overlay-container"),a.qZA())}let N=(()=>{class t{constructor(t,e,n,i,o,s,c){this.content=t,this.context=e,this.windowRef=n,this.config=i,this.focusTrapFactory=o,this.elementRef=s,this.renderer=c}get isFullScreen(){return this.windowRef.state===d.FULL_SCREEN}get maximized(){return this.windowRef.state===d.MAXIMIZED}get minimized(){return this.windowRef.state===d.MINIMIZED}get showMinimize(){return this.config.buttons.minimize}get showMaximize(){return this.config.buttons.maximize}get showFullScreen(){return this.config.buttons.fullScreen}ngOnInit(){this.focusTrap=this.focusTrapFactory.create(this.elementRef.nativeElement),this.focusTrap.blurPreviouslyFocusedElement(),this.focusTrap.focusInitialElement(),this.config.windowClass&&this.renderer.addClass(this.elementRef.nativeElement,this.config.windowClass)}ngAfterViewChecked(){!this.overlayContainer||this.overlayContainer.isAttached||(this.content instanceof a.Rgc?this.attachTemplate():this.attachComponent())}ngOnDestroy(){this.focusTrap&&this.focusTrap.restoreFocus(),this.close()}minimize(){this.windowRef.state===d.MINIMIZED?this.windowRef.toPreviousState():this.windowRef.minimize()}maximize(){this.windowRef.maximize()}fullScreen(){this.windowRef.fullScreen()}maximizeOrFullScreen(){this.windowRef.state===d.MINIMIZED&&this.showMaximize?this.maximize():this.fullScreen()}close(){this.windowRef.close()}attachTemplate(){this.overlayContainer.attachTemplatePortal(new u.U2(this.content,null,this.context))}attachComponent(){const t=new u.Qi(this.content,null,null,this.cfr),e=this.overlayContainer.attachComponentPortal(t,this.context);this.windowRef.componentInstance=e.instance,e.changeDetectorRef.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(m),a.Y36(w),a.Y36(C),a.Y36(f),a.Y36(k.E),a.Y36(a.SBq),a.Y36(a.Qsj))},t.\u0275cmp=a.Xpm({type:t,selectors:[["nb-window"]],viewQuery:function(t,e){if(1&t&&a.Gf(y.C,5),2&t){let t;a.iGM(t=a.CRH())&&(e.overlayContainer=t.first)}},hostVars:6,hostBindings:function(t,e){2&t&&a.ekj("full-screen",e.isFullScreen)("maximized",e.maximized)("minimized",e.minimized)},inputs:{cfr:"cfr"},decls:12,vars:6,consts:[["cdkFocusInitial","","tabindex","-1",4,"ngIf","ngIfElse"],["textTitleTemplate",""],[1,"buttons"],[4,"ngIf"],["nbButton","","ghost","",3,"click"],["icon","close-outline","pack","nebular-essentials"],["cdkFocusInitial","","tabindex","-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkFocusInitial","","tabindex","-1",1,"title"],["icon","minus-outline","pack","nebular-essentials"],["nbButton","","ghost","",3,"click",4,"ngIf"],["icon","collapse-outline","pack","nebular-essentials"],["icon","expand-outline","pack","nebular-essentials"]],template:function(t,e){if(1&t&&(a.TgZ(0,"nb-card"),a.TgZ(1,"nb-card-header"),a.YNc(2,S,2,4,"div",0),a.YNc(3,T,2,1,"ng-template",null,1,a.W1O),a.TgZ(5,"div",2),a.YNc(6,z,3,0,"ng-container",3),a.YNc(7,I,2,1,"ng-container",3),a.YNc(8,E,2,1,"ng-container",3),a.TgZ(9,"button",4),a.NdJ("click",function(){return e.close()}),a._UZ(10,"nb-icon",5),a.qZA(),a.qZA(),a.qZA(),a.YNc(11,W,2,0,"nb-card-body",3),a.qZA()),2&t){const t=a.MAs(4);a.xp6(2),a.Q6J("ngIf",e.config.titleTemplate)("ngIfElse",t),a.xp6(4),a.Q6J("ngIf",e.showMinimize),a.xp6(1),a.Q6J("ngIf",e.showMaximize),a.xp6(1),a.Q6J("ngIf",e.showFullScreen),a.xp6(3),a.Q6J("ngIf",e.maximized||e.isFullScreen)}},directives:[O.As,O.nd,i.O5,M.D,_.f,i.tP,O.yK,y.C],styles:["[_nghost-%COMP%]{flex:1 0 auto;min-width:20rem}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   nb-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;overflow:hidden}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{flex:1 0 auto;margin-right:3rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{width:9.5rem;display:flex;justify-content:flex-end}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   [nbButton][_ngcontent-%COMP%]{flex:0 0 3rem}.full-screen[_nghost-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}.maximized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.minimized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;height:auto}.minimized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-bottom:none}"]}),t})();var F=n(56722),B=n(65603),U=n(35027);let q=(()=>{class t{constructor(t,e,n,i,o,s,c){this.componentFactoryResolver=t,this.overlayService=e,this.overlayPositionBuilder=n,this.blockScrollStrategy=i,this.defaultWindowsConfig=o,this.cfr=s,this.openWindows=[],this.document=c}open(t,e={}){this.shouldCreateWindowsContainer()&&this.createWindowsContainer();const n=new f(this.defaultWindowsConfig,e),i=new C(n);return i.componentRef=this.appendWindow(t,n,i),this.openWindows.push(i),this.subscribeToEvents(i),i}shouldCreateWindowsContainer(){return!this.windowsContainerViewRef||!this.document.body.contains(this.windowsContainerViewRef.element.nativeElement)}createWindowsContainer(){this.overlayRef&&this.overlayRef.dispose(),this.overlayRef=this.overlayService.create({scrollStrategy:this.overlayService.scrollStrategies.noop(),positionStrategy:this.overlayPositionBuilder.global().bottom().right(),hasBackdrop:!0});const t=new u.Qi(v,null,null,this.cfr),e=this.overlayRef.attach(t);this.windowsContainerViewRef=e.instance.viewContainerRef}appendWindow(t,e,n){const i=a.zs3.create({parent:e.viewContainerRef?e.viewContainerRef.injector:this.windowsContainerViewRef.injector,providers:[{provide:m,useValue:t},{provide:w,useValue:t instanceof a.Rgc?{$implicit:e.context,windowRef:n}:e.context},{provide:f,useValue:e},{provide:C,useValue:n}]}),o=this.componentFactoryResolver.resolveComponentFactory(N),s=this.windowsContainerViewRef.createComponent(o,null,i);return s.instance.cfr=this.cfr,s.changeDetectorRef.detectChanges(),s}subscribeToEvents(t){t.config.closeOnBackdropClick&&this.overlayRef.backdropClick().subscribe(()=>t.close()),t.config.closeOnEsc&&this.overlayRef.keydownEvents().pipe((0,l.h)(t=>27===t.keyCode)).subscribe(()=>t.close()),t.stateChange.subscribe(()=>this.checkAndUpdateOverlay()),t.onClose.subscribe(()=>{this.openWindows.splice(this.openWindows.indexOf(t),1),this.checkAndUpdateOverlay()})}checkAndUpdateOverlay(){const t=this.openWindows.filter(t=>t.state===d.FULL_SCREEN);t.length>0?this.blockScrollStrategy.enable():this.blockScrollStrategy.disable(),t.some(t=>t.config.hasBackdrop)?this.overlayRef.backdropElement.removeAttribute("hidden"):this.overlayRef.backdropElement.setAttribute("hidden","")}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(a._Vd),a.LFG(B.Pn),a.LFG(u.yV),a.LFG(U.h),a.LFG(p),a.LFG(a._Vd),a.LFG(F.qT))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t})(),J=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[q,{provide:p,useValue:e}]}}static forChild(e){return{ngModule:t,providers:[q,{provide:p,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[i.ez,o.j,s.z,c.K,r.T]]}),t})();var Y=n(71147),V=n(52313),Q=n(10494);const D=["contentTemplate"];function G(t,e){if(1&t&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij('Here is the text provided via config: "',t.text,'"')}}let j=(()=>{class t{constructor(t){this.windowService=t}openWindow(){this.windowService.open(this.contentTemplate,{title:"Window content from template",context:{text:"some text to pass into template"}})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(q))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&a.Gf(D,5),2&t){let t;a.iGM(t=a.CRH())&&(e.contentTemplate=t.first)}},decls:4,vars:0,consts:[["nbButton","",3,"click"],["contentTemplate",""]],template:function(t,e){1&t&&(a.TgZ(0,"button",0),a.NdJ("click",function(){return e.openWindow()}),a._uU(1,"Open window"),a.qZA(),a.YNc(2,G,2,1,"ng-template",null,1,a.W1O))},directives:[M.D],styles:["nb-layout-column{height:400px}  .form{display:flex;flex-direction:column}  .form .text-label{margin-top:1.5rem}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:2rem}"]}),t})();var L=n(12282);let $=(()=>{class t{constructor(t){this.windowRef=t}close(){this.windowRef.close()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(C))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],decls:7,vars:0,consts:[[1,"form"],["for","subject"],["nbInput","","id","subject","type","text"],["for","text",1,"text-label"],["nbInput","","id","text"]],template:function(t,e){1&t&&(a.TgZ(0,"form",0),a.TgZ(1,"label",1),a._uU(2,"Subject:"),a.qZA(),a._UZ(3,"input",2),a.TgZ(4,"label",3),a._uU(5,"Text:"),a.qZA(),a._UZ(6,"textarea",4),a.qZA())},directives:[L.h],encapsulation:2}),t})(),X=(()=>{class t{constructor(t){this.windowService=t}openWindow(){this.windowService.open($,{title:"Window"})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(q))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],decls:2,vars:0,consts:[["nbButton","",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"button",0),a.NdJ("click",function(){return e.openWindow()}),a._uU(1,"Open window"),a.qZA())},directives:[M.D],styles:["nb-layout-column{height:400px}  .form{display:flex;flex-direction:column}  .form .text-label{margin-top:1.5rem}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:2rem}"]}),t})();const H=["escClose"],K=["disabledEsc"];function tt(t,e){1&t&&a._uU(0," Disabled close on escape click. ")}function et(t,e){1&t&&a._uU(0," Click escape to close. ")}let nt=(()=>{class t{constructor(t){this.windowService=t}openWindowWithBackdrop(){this.windowService.open(this.escCloseTemplate,{title:"Window with backdrop",hasBackdrop:!0})}openWindowWithoutBackdrop(){this.windowService.open(this.disabledEscTemplate,{title:"Window without backdrop",hasBackdrop:!1,closeOnEsc:!1})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(q))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(a.Gf(H,5,a.Rgc),a.Gf(K,5,a.Rgc)),2&t){let t;a.iGM(t=a.CRH())&&(e.escCloseTemplate=t.first),a.iGM(t=a.CRH())&&(e.disabledEscTemplate=t.first)}},decls:8,vars:0,consts:[["nbButton","",3,"click"],["disabledEsc",""],["escClose",""]],template:function(t,e){1&t&&(a.TgZ(0,"button",0),a.NdJ("click",function(){return e.openWindowWithBackdrop()}),a._uU(1,"Open window with backdrop"),a.qZA(),a.TgZ(2,"button",0),a.NdJ("click",function(){return e.openWindowWithoutBackdrop()}),a._uU(3,"Open window without backdrop"),a.qZA(),a.YNc(4,tt,1,0,"ng-template",null,1,a.W1O),a.YNc(6,et,1,0,"ng-template",null,2,a.W1O))},directives:[M.D],styles:["nb-layout-column{height:400px}  .form{display:flex;flex-direction:column}  .form .text-label{margin-top:1.5rem}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:2rem}"]}),t})();var it=n(59683);const ot=[{path:"template-window.component",component:j},{path:"window-showcase.component",component:X},{path:"windows-backdrop.component",component:nt},{path:"window-controls.component",component:(()=>{class t{constructor(t){this.windowService=t,this.minimize=!0,this.maximize=!0,this.fullScreen=!0}openWindow(){this.windowService.open($,{title:"Window",buttons:{minimize:this.minimize,maximize:this.maximize,fullScreen:this.fullScreen}})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(q))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],decls:12,vars:3,consts:[[1,"subtitle","config-title"],[3,"checked","checkedChange"],["nbButton","",1,"open-window",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"nb-card"),a.TgZ(1,"nb-card-body"),a.TgZ(2,"p",0),a._uU(3,"Buttons config:"),a.qZA(),a.TgZ(4,"nb-checkbox",1),a.NdJ("checkedChange",function(t){return e.minimize=t}),a._uU(5,"Minimize"),a.qZA(),a.TgZ(6,"nb-checkbox",1),a.NdJ("checkedChange",function(t){return e.maximize=t}),a._uU(7,"Maximize"),a.qZA(),a.TgZ(8,"nb-checkbox",1),a.NdJ("checkedChange",function(t){return e.fullScreen=t}),a._uU(9,"Full Screen"),a.qZA(),a.TgZ(10,"button",2),a.NdJ("click",function(){return e.openWindow()}),a._uU(11,"Open window"),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.Q6J("checked",e.minimize),a.xp6(2),a.Q6J("checked",e.maximize),a.xp6(2),a.Q6J("checked",e.fullScreen))},directives:[O.As,O.yK,it.N,M.D],styles:["nb-layout-column{height:400px}  .form{display:flex;flex-direction:column}  .form .text-label{margin-top:1.5rem}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:2rem}",".config-title[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.25rem}nb-checkbox[_ngcontent-%COMP%]{display:block}.open-window[_ngcontent-%COMP%]{margin-top:1rem}"],changeDetection:0}),t})()}];let st=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[Q.Bz.forChild(ot)],Q.Bz]}),t})(),ct=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[J.forRoot(),r.T,Y.n,V.M,s.z,st]]}),t})()}}]);